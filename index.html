<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Drinking Game Spinner</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #000000;
      color: white;
      margin: 0;
      padding: 0;
    }

    h1 {
      font-size: 3.5em;
      margin-top: 20px;
      margin-bottom: 1px;
    }
    
    h3 {
       margin-top: 2; 
    }
    
img {
  width: 100%; /* Default full width */
  max-width: 400px; /* Limits image size */
}

/* Adjust image size ONLY on mobile screens (max-width: 768px) */
@media (max-width: 768px) {
  img {
    max-width: 250px; /* Reduce the size of the image on mobile */
  }
}

/* Change margins only on mobile screens */
@media (max-width: 768px) {
  p {
    margin: 10px 15px; /* Adjust top/bottom and left/right margins */
  }
}

    input, button {
      padding: 10px;
      margin: 10px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
    }
    
    input, button1 {
      padding: 10px;
      margin: 10px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
    }

    input {
      width: 200px;
    }

    button {
      background-color: #f3b13a;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #e84118;
    }
    
    
     button1 {
      background-color: #000000;
      margin: 30px
      color: white;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }


  canvas {
  margin-top: 20px;
  background: white;
  border-radius: 50%;
  width: 80vw;  /* Spinner width is 80% of the viewport width */
  height: 80vw; /* Spinner height is 80% of the viewport width */
  max-width: 500px; /* Set a max width for the spinner */
  max-height: 500px; /* Set a max height for the spinner */
}

  #arrow {
  position: absolute;
  width: 0;
  height: 0;
  border-top: 20px solid transparent;
  border-bottom: 20px solid transparent;
  border-right: 30px solid red;
  top: 50%; /* Vertically center the arrow */
  left: 90%; /* Position the arrow completely to the right of the spinner */
  transform: translateY(-50%); /* Adjust to keep the arrow vertically centered */
}

/* Media query for mobile screen sizes */
@media (max-width: 768px) {
  #arrow {
    border-top: 15px solid transparent; /* Smaller arrow size */
    border-bottom: 15px solid transparent; /* Smaller arrow size */
    border-right: 25px solid red; /* Smaller arrow size */
    margin-left: 10px;
    position: absolute;
    bottom: 10px; /* Move the arrow down 10px from the bottom of the spinner */
    left: 90%; /* Center horizontally */
    transform: translateY(-50%); /* Adjust the position to make sure it's centered */
  }
}

    #playButton, #spinButton, #backButton {
      margin-top: 20px;
      padding: 15px 30px;
      font-size: 18px;
      background-color: #ffffff;
      color: black;
      cursor: pointer;
    }
    
     #doneButton {
       margin-top: 20px;
      padding: 15px 30px;
      font-size: 18px;
      background-color: #000000;
      color: white;
      cursor: pointer;
     
     }

    #playButton:hover, #spinButton:hover, #doneButton:hover, #backButton:hover {
      background-color: #2f3640;
    }

    #spinnerContainer {
      position: relative;
      display: inline-block;
    }
    
    

    .container {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 20px;
      position: relative;
    }

  #card {
  display: none;
  background-color: white;
  color: black;
  width: 80%; /* Card width is 80% of the viewport width */
  max-width: 500px; /* Set a max width for the card */
  height: auto; /* Let the height adjust based on content */
  margin: 50px auto;
  border-radius: 15px;
  padding: 20px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
  font-size: 18px;
  text-align: center;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

#message {
  margin-top: 10px;
  margin-bottom: 20px;
  font-size: 2em;
  color: yellow;
  font-weight: bold;
  display: none;
}

    #card h2 {
      margin-bottom: 30px;
      font-size: 24px;
    }

    #card p {
      font-size: 16px;
    }

    .hidden {
      display: none !important;
    }

    /* Popup styles */
    #popup {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: white;
      color: black;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      text-align: center;
      z-index: 1000;
      
    }

    #popup button {
      background-color: #28a745;
      color: white;
      font-size: 16px;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      margin: 5px;
    }

    #popup button:hover {
      background-color: #218838;
    }

    #overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 999;
    }
.player-list {
  display: flex;
  flex-direction: column;    /* Stack players vertically */
  align-items: center;       /* Center the list horizontally */
}

.player-list div {
  display: flex;             /* Align name and emojis horizontally */
  justify-content: center;   /* Center the items in the row */
  align-items: center;       /* Align name and emojis vertically */
  margin-bottom: 10px;       /* Space between each player */
  font-size: 18px;           /* Font size for names */
}

.name-buttons {
  display: flex;             /* Align the buttons horizontally */
  gap: 10px;                 /* Space between the two buttons */
  margin-left: 10px;         /* Space between the name and the buttons */
}

.name-buttons button {
  font-size: 18px;           /* Adjust emoji size */
  padding: 5px 10px;
  background-color: #000000;
  color: white;
  border: none;
  border-radius: 3px;
  cursor: pointer;
}

.name-buttons button:hover {
  background-color: #e84118;
}



  </style>
</head>
<body>
  <div id="setupPage">
    <img src="https://raw.githubusercontent.com/teestechtest/berserk-games/main/assets/Screenshot%202025-02-07%20at%2000.23.00.png" alt="Title Image" width=400">
    <p>Enter player names and click "Play" to start the spinner!</p>
    <input type="text" id="nameInput" placeholder="Enter a name">
    <button onclick="addName()">Add Name</button>
    <button onclick="clearNames()">Clear Names</button>
    <div id="playerList" class="player-list"></div>
    <button id="playButton" onclick="startGame()" class="hidden">Play</button>
  </div>

  <div id="gamePage" class="hidden">
    <h1>Tipsy Spinner</h1>
    <p>Click "Spin" To Play!</p>
    <div id="message"></div> <!-- The message will pop up here -->
    <div class="container">
      <div id="spinnerContainer">
        <canvas id="spinner" width="400" height="400"></canvas>
      </div>
      <div id="arrow"></div>
    </div>
    <button id="spinButton" onclick="spin()">Spin</button>
    <button id="backButton" onclick="goBack()">Back</button>
  </div>

  <div id="card" class="hidden">
    <h2 id="playerName"></h2>
    <p id="question"></p>
    <button id="doneButton" onclick="done()">Done</button>
  </div>

  <!-- Popup for unlock -->
  <div id="overlay"></div>
  <div id="popup">
    <h2>Want more questions?</h2>
  
    <button onclick="handlePay()">Shop</button>
    <button onclick="restartGame()">Restart</button>
  </div>

  <script>
    const names = [];
    const questionBank = [
  "Most likely to get kicked out of a bar? Drink",
  "Most likely to drunk-text their ex? Drink",
  "Most likely to end up on reality TV? Drink",
  "Most likely to marry for money? Drink",
  "Most likely to forget their own birthday? Drink",
  "Most likely to get arrested? Drink",
  "Most likely to become famous? Drink",
  "Most likely to hook up with a stranger tonight? Drink",
  "Most likely to call their mom while drunk? Drink",
  "Most likely to dance on a table? Drink",
  "Text your crush, “I think we’d be cute together.” Or drink",
  "Let the group go through your phone for 60 seconds or drink twice",
  "Post “I love feet” on your social media story or drink three times",
  "Send the fifth photo in your camera roll to the group chat or drink",
  "Read out your last text message or drink",
  "Let someone write something on your forehead with a marker or drink",
  "Attempt a TikTok dance or drink",
  "Call a random contact and ask for $5 or drink",
  "Speak in a foreign accent for the next three rounds or drink",
  "Swap shirts with the person next to you or drink",
  "Never have I ever kissed more than one person in one night",
  "Never have I ever gone skinny dipping",
  "Never have I ever been on a dating app",
  "Never have I ever ghosted someone",
  "Never have I ever lied in this game",
  "Never have I ever faked being drunk",
  "Never have I ever hooked up with a coworker",
  "Never have I ever been in handcuffs",
  "Never have I ever thrown up from drinking",
  "Never have I ever made a bet I immediately regretted",
  "Would you rather drunk text your boss or your ex? Drink if you choose neither",
  "Would you rather take a shot or let someone scroll through your DMs for 30 seconds",
  "Would you rather lose your phone for a week or not drink for a month",
  "Would you rather be famous for something embarrassing or completely unknown forever",
  "Would you rather always have to speak in rhymes or sing everything you say",
  "Would you rather get caught making out in public or send a risky text to the wrong person",
  "Would you rather only be able to whisper or only be able to shout",
  "Would you rather give up social media or alcohol for a year",
  "Would you rather kiss someone random in the group or drink three times",
  "Would you rather have to chug your drink or pour it on your head",
  "For the next round, you must only speak in questions or drink",
  "Every time someone swears, they take a drink",
  "For the next three rounds, no one can say “drink” or they drink",
  "If your name has an 'A' in it, take a drink",
  "You must hold your drink with your non-dominant hand for the next round or drink twice",
  "If you're wearing jeans, take a drink",
  "If you’ve ever faked being sick to get out of work, drink",
  "If you’ve been single for over a year, drink twice",
  "If you’ve ever slid into someone’s DMs, drink",
  "If you’ve ever used a fake ID, drink",
  "Drink if you’ve ever thrown a drink at someone",
  "Drink if you’ve ever been in a bar fight",
  "Drink if you’ve ever blacked out",
  "Drink if you’ve ever kissed someone in the room",
  "Drink if you’ve ever had a one-night stand",
  "Drink if you’ve ever lied about your age to get into a club",
  "Drink if you’ve ever been caught sneaking out",
  "Drink if you’ve ever stolen something",
  "Drink if you’ve ever been dumped",
  "Drink if you’ve ever ghosted someone",
  "Stare into the eyes of the person on your left for 10 seconds or drink",
  "The person with the loudest laugh drinks",
  "The person with the most unread texts drinks",
  "Take a drink if your phone battery is under 20%",
  "Let the group pick a new name for you for the rest of the game or drink",
  "Do an impression of someone in the group or drink",
  "Do your best pick-up line on someone in the room or drink",
  "Pretend to be a bartender and make a drink for someone else or take a shot",
  "Show the last thing you Googled or drink",
  "The last person to touch their nose drinks",
  "Choose someone to have a staring contest with; loser drinks",
  "The tallest person in the room takes a drink",
  "If you're single, take a drink. If you're in a relationship, take two",
  "If you’ve ever kissed the same gender, drink",
  "Everyone with an iPhone takes a drink",
  "Everyone wearing black takes a drink",
  "Pair up with someone. If you both have the same shoe size, drink",
  "Everyone who has been to a concert in the last year drinks",
  "Everyone who has a tattoo takes a drink",
  "Everyone in the room votes on who is most likely to marry first. That person drinks",
  "Name three countries in five seconds or drink",
  "Name three alcoholic drinks in five seconds or drink",
  "Name three celebrities who are currently single or drink",
  "Say the alphabet backwards in 10 seconds or drink",
  "Count to 30 without anyone interrupting. If someone interrupts, they drink",
  "If you can guess someone’s middle name in the group, they drink",
  "If you can name the capital of Australia, everyone else drinks",
  "If you have less than $10 in your bank account, drink",
  "If you can guess what color underwear the person to your left is wearing, they drink",
  "If you can balance a bottle on your head for 10 seconds, give out a drink",
  "Have you ever cheated on someone",
  "What's the most embarrassing thing you've ever done drunk",
  "Have you ever been rejected in public",
  "What’s your most embarrassing guilty pleasure",
  "Who in this room would you most want to kiss",
  "What’s the most embarrassing text you’ve ever sent",
  "Have you ever been caught lying",
  "What’s the worst date you’ve ever been on",
  "What’s the biggest lie you’ve ever told",
  "Have you ever hooked up with a friend’s ex"
];

   
    const canvas = document.getElementById("spinner");
    const ctx = canvas.getContext("2d");
    let spinning = false;
    let spinCount = 0; // Track the number of spins

    function addName() {
      const nameInput = document.getElementById("nameInput");
      const name = nameInput.value.trim();
      if (name) {
        names.push(name);
        nameInput.value = "";
        updateNameList();
        document.getElementById("playButton").classList.remove("hidden");
      } else {
        alert("Please enter a valid name.");
      }
    }

    function clearNames() {
      names.length = 0;
      updateNameList();
      document.getElementById("playButton").classList.add("hidden");
    }

 function updateNameList() {
    const nameList = document.getElementById("playerList");
    nameList.innerHTML = ""; // Clear the list before updating

    names.forEach((name, index) => {
        const listItem = document.createElement("div");
        
        // Create a span for the name text
        const nameSpan = document.createElement("span");
        nameSpan.textContent = name;
        listItem.appendChild(nameSpan);

        const buttonsDiv = document.createElement("div");
        buttonsDiv.className = "name-buttons";

        // Create the emoji buttons
        const editButton = document.createElement("button");
        editButton.textContent = "🖊️";
        editButton.onclick = () => editName(index);

        const removeButton = document.createElement("button");
        removeButton.textContent = "❌";
        removeButton.onclick = () => removeName(index);

        // Append the buttons to the buttons container
        buttonsDiv.appendChild(editButton);
        buttonsDiv.appendChild(removeButton);

        // Append buttons div to list item
        listItem.appendChild(buttonsDiv);
        
        // Append list item to name list
        nameList.appendChild(listItem);
    });
}


    function editName(index) {
      const newName = prompt("Edit name:", names[index]);
      if (newName && newName.trim() !== "") {
        names[index] = newName.trim();
        updateNameList();
      } else {
        alert("Invalid name. Please try again.");
      }
    }

    function removeName(index) {
      if (confirm(`Are you sure you want to remove "${names[index]}"?`)) {
        names.splice(index, 1);
        updateNameList();
        if (names.length === 0) {
          document.getElementById("playButton").classList.add("hidden");
        }
      }
    }

    function startGame() {
      if (names.length === 0) {
        alert("Please add at least one name.");
        return;
      }
      document.getElementById("setupPage").classList.add("hidden");
      document.getElementById("gamePage").classList.remove("hidden");
      drawSpinner();
    }
    

function drawSpinner() {
  const colors = ["#FF7518", "#FF4B18", "#FF9E18", "#FF3A18", "#FF6A18", "#FFB318"];
  const sections = getSections();
  const sectionCount = sections.length;
  const anglePerSection = (2 * Math.PI) / sectionCount;

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Draw the outer red border (part of the spinner)
  ctx.beginPath();
  ctx.arc(canvas.width / 2, canvas.height / 2, canvas.width / 2, 0, 2 * Math.PI);
  ctx.lineWidth = 15; // Border thickness
  ctx.strokeStyle = "red"; // Border color
  ctx.stroke();
  ctx.closePath();

  // Draw the spinner sections
  for (let i = 0; i < sectionCount; i++) {
    const angleStart = i * anglePerSection;
    const angleEnd = (i + 1) * anglePerSection;

    ctx.beginPath();
    ctx.moveTo(canvas.width / 2, canvas.height / 2);
    ctx.arc(canvas.width / 2, canvas.height / 2, canvas.width / 2 - 10, angleStart, angleEnd);
    ctx.fillStyle = colors[i % colors.length];
    ctx.fill();
  }

  // Draw the names inside the spinner sections
  ctx.fillStyle = "white";
  ctx.font = "14px Arial";
  ctx.textAlign = "center";

  for (let i = 0; i < sectionCount; i++) {
    const angleStart = i * anglePerSection;

    ctx.save();
    ctx.translate(canvas.width / 2, canvas.height / 2);
    ctx.rotate(angleStart + anglePerSection / 2);
    ctx.fillText(sections[i], canvas.width / 4, 10);
    ctx.restore();
  }

  // Draw the small center circle with pointer
  drawCenterCircleWithPoint();
}



function drawCenterCircleWithPoint() {
  // Make the circle and point sizes relative to the canvas size
  const circleRadius = canvas.width * 0.05; // Circle radius is 5% of the canvas width
  const pointLength = canvas.width * 0.00;  // Point length is 7% of the canvas width

  // Draw the circle in the center
  ctx.beginPath();
  ctx.arc(canvas.width / 2, canvas.height / 2, circleRadius, 0, Math.PI * 2);  // Draw circle at the center of the spinner
  ctx.fillStyle = "white"; // Set circle color to white
  ctx.fill();  // Fill the circle

  // Calculate the rotation angle for the point based on the spinner's current position
  const angle = getSpinnerRotationAngle();  // Get the current rotation angle of the spinner
  ctx.beginPath();
  ctx.moveTo(canvas.width / 2, canvas.height / 2);
  ctx.lineTo(canvas.width / 2, canvas.height / 2 - pointLength);  // Draw the point extending upward
  ctx.strokeStyle = "white"; // Set the color of the point
  ctx.lineWidth = 3;  // Set point thickness
  ctx.stroke();
}


// Function to resize the canvas and redraw the spinner when the window resizes
window.addEventListener('resize', resizeCanvas);

function resizeCanvas() {
  const size = Math.min(window.innerWidth, window.innerHeight) * 0.6; // 60% of the viewport size
  canvas.width = size;
  canvas.height = size;
  drawSpinner(); // Redraw spinner to match new size
}

resizeCanvas(); // Initialize on page load

// Function to get the current rotation angle of the spinner
function getSpinnerRotationAngle() {
  const spinCount = 0; // Set this to the current spin angle or state
  const spinAngle = Math.random() * 360 + 1440; // Placeholder for spin angle (replace this with actual angle tracking)
  return spinAngle * Math.PI / 180;  // Convert to radians
}


// Function to get the current rotation angle of the spinner
function getSpinnerRotationAngle() {
  const spinCount = 0; // Set this to the current spin angle or state
  const spinAngle = Math.random() * 360 + 1440; // Placeholder for spin angle (replace this with actual angle tracking)
  return spinAngle * Math.PI / 180;  // Convert to radians
}



    function getSections() {
      const sections = names.length < 8 ? [...names, ...names] : [...names];
      const midpoint = Math.floor(sections.length / 2);
      sections.splice(midpoint, 0, "All Players");
      sections.push("All Players");
      return sections;
    }

    function spin() {
      if (spinning) return;

      spinning = true;
      spinCount++; // Increment spin count
      document.getElementById("message").style.display = "none";
      document.getElementById("card").classList.add("hidden");
      const spinAngle = Math.random() * 360 + 1440;
      const spinDuration = 1800;
      const startTime = Date.now();

      const sections = getSections();

      const animate = () => {
        const elapsed = Date.now() - startTime;
        const progress = Math.min(elapsed / spinDuration, 1);
        const currentAngle = spinAngle * progress;

        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.save();
        ctx.translate(canvas.width / 2, canvas.height / 2);
        ctx.rotate((currentAngle * Math.PI) / 180);
        ctx.translate(-canvas.width / 2, -canvas.height / 2);
        drawSpinner();
        ctx.restore();

        if (progress < 1) {
          requestAnimationFrame(animate);
        } else {
          spinning = false;
          const finalAngle = (currentAngle % 360) / (360 / sections.length);
          const winnerIndex = Math.floor(sections.length - finalAngle) % sections.length;
          showMessage(sections[winnerIndex]);
        }
      };

      animate();
    }

    function showMessage(player) {
      const message = document.getElementById("message");
      message.innerText = `${player}, it's your turn!`;
      message.style.display = "block";

      setTimeout(() => {
        message.style.display = "none";
        showCard(player);
      }, 1800);
    }

    function showCard(player) {
      const randomQuestion = questionBank[Math.floor(Math.random() * questionBank.length)];
      document.getElementById("playerName").innerText = player === "All Players" ? "Everyone!" : player;
      document.getElementById("question").innerText = randomQuestion;
      document.getElementById("gamePage").classList.add("hidden");
      document.getElementById("card").classList.remove("hidden");
    }

    function done() {
      document.getElementById("card").classList.add("hidden");
      if (spinCount >= 100) {
        showPopup(); // Show the payment popup after the 100th card
      } else {
        document.getElementById("gamePage").classList.remove("hidden");
      }
    }

    function goBack() {
      document.getElementById("gamePage").classList.add("hidden");
      document.getElementById("setupPage").classList.remove("hidden");
    }

    function restartGame() {
      document.getElementById("setupPage").classList.remove("hidden");
      document.getElementById("gamePage").classList.add("hidden");
      spinCount = 0; // Reset spin count
      names.length = 0; // Clear names
      updateNameList();
      document.getElementById("overlay").style.display = "none";
      document.getElementById("popup").style.display = "none";
    }

    function showPopup() {
      document.getElementById("overlay").style.display = "block";
      document.getElementById("popup").style.display = "block";
    }

   function handlePay() {
  alert("Redirecting...");
  
  // Redirect after 2 seconds
  setTimeout(function() {
    window.location.href = "https://www.berserk-games.co.uk/shop";  // desired URL
  }, 2000);  // 2000 milliseconds = 2 seconds
}
  </script>
</body>
</html>
